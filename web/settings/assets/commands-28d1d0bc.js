import{_ as c,q as p,l as r,m as d,A as m,K as u,v as l}from"./vendor-5f866419.js";import"./vendor-sortablejs-793d687d.js";const g={name:"ChargePointCommandsOpenwbPro",props:{configuration:{type:Object,required:!0},chargePointId:{default:void 0}},methods:{async triggerUpdate(){let n=new FormData;n.append("update",1);const a="Die Aktualisierung der openWB Pro wird gestartet...",o=Math.floor(Date.now()/1e3);this.$store.commit("addTopic",{topic:"openWB/command/"+this.$root.mqttClientId+"/messages/"+o,payload:{source:"command",type:"info",message:a,timestamp:o}}),this.axios.post("http://"+this.configuration.ip_address+"/connect.php",n,{timeout:5e3}).then(e=>{console.log("POST response",e.data);const t="Die Aktualisierung der openWB Pro wurde erfolgreich gestartet.",s=Math.floor(Date.now()/1e3);this.$store.commit("addTopic",{topic:"openWB/command/"+this.$root.mqttClientId+"/messages/"+s,payload:{source:"command",type:"success",message:t,timestamp:s}})}).catch(e=>{var t="Aktualisierung fehlgeschlagen!<br />";e.response?(console.log(e.response.status,e.response.data),t+=e.response.status+": "+e.response.data):e.request?(console.log(e.request),t+="Es wurde keine Antwort vom Server empfangen."):(console.log("Error",e.message),t+="Es ist ein unbekannter Fehler aufgetreten.");const s=Math.floor(Date.now()/1e3);this.$store.commit("addTopic",{topic:"openWB/command/"+this.$root.mqttClientId+"/messages/"+s,payload:{source:"command",type:"danger",message:t,timestamp:s}})})}}},h={class:"charge-point-commands-openwbpro"};function f(n,a,o,e,t,s){const i=p("openwb-base-button-input");return r(),d("div",h,[m(i,{title:"Ladepunkt aktualisieren",buttonText:"Update anfordern",subtype:"success",disabled:o.configuration.ip_address==null,onButtonClicked:s.triggerUpdate},{help:u(()=>[l(" Mit diesem Befehl können Sie die Aktualisierung der openWB Pro anstoßen. Bitte beachten Sie, dass kein Fahrzeug angesteckt ist. ")]),_:1},8,["disabled","onButtonClicked"])])}const k=c(g,[["render",f],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/charge_points/openwb_pro/commands.vue"]]);export{k as default};
